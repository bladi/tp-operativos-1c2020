#ifndef GAMEBOY_H_
#define GAMEBOY_H_
//////////////////////////////////////////////////////////////////////////COMMONS///////////////////////////////////////////////////////////////////////////////////////

#include <commons/config.h>
#include <commons/collections/list.h>
#include <commons/string.h>
#include <commons/txt.h>
#include <commons/log.h>

//////////////////////////////////////////////////////////////////////////LIBS "C"//////////////////////////////////////////////////////////////////////////////////////

#include <stdint.h>
#include <time.h>
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>
#include <unistd.h>
#include <pthread.h>
#include <sys/stat.h>
#include <sys/mman.h>
#include <fcntl.h>
#include <limits.h>
#include <sys/types.h>
#include <unistd.h>
#include <dirent.h>

////////////////////////////////////////////////////////////////////////LIBS COMPARTIDAS/////////////////////////////////////////////////////////////////////////////////

#include "../libreriasCompartidas/sockets.h"
#include "../libreriasCompartidas/serializacion.h"

///////////////////////////////////////////////////////////////////////VARIABLES CONFIG//////////////////////////////////////////////////////////////////////////////////

#define IP_BROKER "IP_BROKER"
#define IP_TEAM "IP_TEAM"
#define IP_GAMECARD "IP_GAMECARD"
#define PUERTO_BROKER "PUERTO_BROKER"
#define PUERTO_TEAM "PUERTO_TEAM"
#define PUERTO_GAMECARD "PUERTO_GAMECARD"
#define LOG_FILE "LOG_FILE"

//////////////////////////////////////////////////////////////////////VARIABLES ESTATICAS/////////////////////////////////////////////////////////////////////////////////

#define PATH_CONFIG_GAMEBOY "configs/configGameBoy.config"

#define ID_BROKER 1
#define ID_GAMECARD 2
#define ID_TEAM 3

///////////////////////////////////////////////////////////////////////////ESTRUCTURAS////////////////////////////////////////////////////////////////////////////////////

typedef struct gameBoyConfig_s{

	char* ipBroker;
	char* ipTeam;
	char* ipGameCard;
    uint32_t puertoBroker;
    uint32_t puertoTeam;
    uint32_t puertoGameCard;
	char* logFile;

} gameBoyConfig_t;

///////////////////////////////////////////////////////////////////////VARIABLES GLOBALES/////////////////////////////////////////////////////////////////////////////////

t_config* unGameBoyArchivoConfig;
gameBoyConfig_t* unGameBoyConfig;
t_log* logger;

unsigned char idConfigGameBoy;
unsigned char nuevoIdConfigGameBoy;

uint32_t cantidadDeActualizacionesConfigGameBoy;

int socketBroker;
int socketGameCard;
//int socketTeam;

pthread_t hiloActualizadorConfigGameBoy;

///////////////////////////////////////////////////////////////////////////FUNCIONES//////////////////////////////////////////////////////////////////////////////////////

void configurarLoggerGameBoy();

void cargarConfiguracionGameBoy();
void actualizarConfiguracionGameBoy();

void inicializarGameBoy();
void inicializarHilosYVariablesGameBoy();
void finalizarGameBoy();

void administradorDeConexiones(void* infoAdmin);

#endif